<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>HTML5手势检测和原理 | Fifteen的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="先了解下手势常用的 HTML5 手势可以分为两类，单点手势和两点手势。单点手势有 tap(单击)，double tap(双击)，long tap(长按)，swipe(挥)，move(移动)。两点手势有 pinch(缩放)，rotate(旋转)。 接下来我们实现一个检测这些手势的 js 库，并利用这个手势库做出炫酷的交互效果。">
<meta property="og:type" content="article">
<meta property="og:title" content="HTML5手势检测和原理">
<meta property="og:url" content="http://yoursite.com/2016/08/18/about-touch/index.html">
<meta property="og:site_name" content="Fifteen的博客">
<meta property="og:description" content="先了解下手势常用的 HTML5 手势可以分为两类，单点手势和两点手势。单点手势有 tap(单击)，double tap(双击)，long tap(长按)，swipe(挥)，move(移动)。两点手势有 pinch(缩放)，rotate(旋转)。 接下来我们实现一个检测这些手势的 js 库，并利用这个手势库做出炫酷的交互效果。">
<meta property="og:image" content="http://hbimg.b0.upaiyun.com/a886eed2a16aa2dd0c064e9bededf4b6bd68e3d763b4-mduCQK_fw658">
<meta property="og:updated_time" content="2016-08-18T02:40:04.395Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HTML5手势检测和原理">
<meta name="twitter:description" content="先了解下手势常用的 HTML5 手势可以分为两类，单点手势和两点手势。单点手势有 tap(单击)，double tap(双击)，long tap(长按)，swipe(挥)，move(移动)。两点手势有 pinch(缩放)，rotate(旋转)。 接下来我们实现一个检测这些手势的 js 库，并利用这个手势库做出炫酷的交互效果。">
<meta name="twitter:image" content="http://hbimg.b0.upaiyun.com/a886eed2a16aa2dd0c064e9bededf4b6bd68e3d763b4-mduCQK_fw658">
    

    
        <link rel="alternate" href="/" title="Fifteen的博客" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/vendor/open-sans/styles.css">
    <link rel="stylesheet" href="/vendor/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/vendor/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/vendor/fancybox/jquery.fancybox.css">
    
    
    
    

</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Fifteen的博客</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">所有文章</a>
                
                    <a class="main-nav-link" href="/categories">分类</a>
                
                    <a class="main-nav-link" href="/tags">标签</a>
                
                    <a class="main-nav-link" href="/about">关于</a>
                
                    <a class="main-nav-link" href="/share">分享</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/litten.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">所有文章</a></td>
                
                    <td><a class="main-nav-link" href="/categories">分类</a></td>
                
                    <td><a class="main-nav-link" href="/tags">标签</a></td>
                
                    <td><a class="main-nav-link" href="/about">关于</a></td>
                
                    <td><a class="main-nav-link" href="/share">分享</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/litten.png" />
            <h2 id="name">mandy的帅气男盆友</h2>
            <h3 id="title">前端攻城狮</h3>
            <span id="location"><i class="fa fa-map-marker"></i>湖北</span>
            <a id="follow" target="_blank" href="https://zengyimin.github.io/">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                16
                <span>posts</span>
            </div>
            <div class="article-info-block">
                10
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/zengyimin" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-about-touch" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            HTML5手势检测和原理
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2016/08/18/about-touch/">
            <time datetime="2016-08-18T02:24:00.000Z" itemprop="datePublished">2016-08-18</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Study/">Study</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/mobile/">mobile</a>
    </div>

                    </div>
                
            </header>
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>先了解下手势<br>常用的 HTML5 手势可以分为两类，单点手势和两点手势。单点手势有 tap(单击)，double tap(双击)，long tap(长按)，swipe(挥)，move(移动)。两点手势有 pinch(缩放)，rotate(旋转)。 接下来我们实现一个检测这些手势的 js 库，并利用这个手势库做出炫酷的交互效果。<br><img src="http://7xrvqo.com1.z0.glb.clouddn.com/images/gesture_detection_in_html5/2362670-f0092d3a3c5569e0.8a78c884.gif" alt="原图 by qianduan"><br><a id="more"></a></p>
<p>#单击(tap)<br>手势检测的关键是用 touchstart，touchmove，touchend 三个事件对手势进行分解。那么怎么分解单击事件呢？</p>
<p>1 在 touchstart 发生时进入单击检测，只有一个接触点。因为单击事件限制为一个手指的动作。<br>2 没有发生 touchmove 事件或者 touchmove 在一个很小的范围(如下图)。限制 touchmove 在一个很小范围，是为了给用户一定的冗余空间，因为不能保证用户手指在接触屏幕的时候不发生轻微的位移。<br><img src="http://7xrvqo.com1.z0.glb.clouddn.com/images/gesture_detection_in_html5/2362670-6c2122444bc9931e.28abbd66.png" alt="原图 by qianduan"></p>
<p>3 touchend 发生在 touchstart后的很短时间内(如下图)。这个时间段的阈值是毫秒级，用来限制手指和屏幕接触的时间。因为单击事件从开始到结束是很快的。<br><img src="http://7xrvqo.com1.z0.glb.clouddn.com/images/gesture_detection_in_html5/2362670-1f1576fa5e6de996.e580b0a5.png" alt="原图 by qianduan"><br>有了上面的流程，就可以开始实现 tap 事件监测了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">	_getTime() &#123;</div><div class="line">  return new Date().getTime();</div><div class="line">&#125;</div><div class="line">_onTouchStart(e) &#123;</div><div class="line">    //记录touch开始的位置</div><div class="line">    this.startX = e.touches[0].pageX;</div><div class="line">    this.startY = e.touches[0].pageY;</div><div class="line">    if(e.touches.length &gt; 1) &#123;</div><div class="line">      //多点监测</div><div class="line">      ...</div><div class="line">    &#125;else &#123;</div><div class="line">      //记录touch开始的时间</div><div class="line">      this.startTime = this._getTime();</div><div class="line">    &#125;</div><div class="line"> &#125;</div><div class="line">_onTouchMove(e) &#123;</div><div class="line">  ...</div><div class="line">  //记录手指移动的位置</div><div class="line">  this.moveX = e.touches[0].pageX;</div><div class="line">  this.moveY = e.touches[0].pageY;</div><div class="line">  ...</div><div class="line">&#125;</div><div class="line">_onTouchEnd(e) &#123;</div><div class="line">  let timestamp = this._getTime();</div><div class="line">  if(this.moveX !== null &amp;&amp; Math.abs(this.moveX - this.startX) &gt; 10 ||</div><div class="line">    this.moveY !== null &amp;&amp; Math.abs(this.moveY - this.startY) &gt; 10) &#123;</div><div class="line">      ...</div><div class="line">  &#125;else &#123;</div><div class="line">    //手指移动的位移要小于10像素并且手指和屏幕的接触时间要短语500毫秒</div><div class="line">    if(timestamp - this.startTime &lt; 500) &#123;</div><div class="line">      this._emitEvent(&apos;onTap&apos;)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>#双击(double tap)<br>和单击一样，双击事件也需要我们对手势进行量化分解。 1. 双击事件是一个手指的行为。所以在 touchstart 时，我们要判断此时屏幕有几个接触点。 2. 双击事件中包含两次独立的单击行为。理想情况下，这两次点击应该落在屏幕上的同一个点上。为了给用户一定的冗余空间，将两次点击的坐标点距离限制在10个像素以内。<br><img src="http://7xrvqo.com1.z0.glb.clouddn.com/images/gesture_detection_in_html5/2362670-b9ba91dcca76bc46.4e3e4ca4.png" alt="原图 by qianduan"><br>3 双击事件本质是两次快速的单击。也即是说，两次点击的间隔时间很短。通过一定的测试量化后，我们把两次单击的时间间隔设为300毫秒。<br><img src="http://7xrvqo.com1.z0.glb.clouddn.com/images/gesture_detection_in_html5/2362670-df88e119b4efa2e8.556310d3.png" alt="原图 by qianduan"><br><strong> 注意双击事件中我们检测了相邻两个 touchstart 事件的位移和时间间隔 </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">	_onTouchStart(e) &#123;</div><div class="line">  if(e.touches.length &gt; 1) &#123;</div><div class="line">  ...</div><div class="line">  &#125; else &#123;</div><div class="line">    if(this.previousTouchPoint) &#123;</div><div class="line">      //两次相邻的touchstart之间距离要小于10，同时时间间隔小于300ms</div><div class="line">      if( Math.abs(this.startX -this.previousTouchPoint.startX) &lt; 10  &amp;&amp;</div><div class="line">          Math.abs(this.startY - this.previousTouchPoint.startY) &lt; 10 &amp;&amp;</div><div class="line">          Math.abs(this.startTime - this.previousTouchTime) &lt; 300) &#123;</div><div class="line">            this._emitEvent(&apos;onDoubleTap&apos;);</div><div class="line">          &#125;</div><div class="line">    &#125;</div><div class="line">    //保存上一次touchstart的时间和位置信息</div><div class="line">    this.previousTouchTime = this.startTime;</div><div class="line">    this.previousTouchPoint = &#123;</div><div class="line">        startX : this.startX,</div><div class="line">        startY : this.startY</div><div class="line">     &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>#长按(long press)<br>长按应该是最容易分解的手势。我们可以这样分解：在 touchstart 发生后的很长一段时间内，如果没有发生 touchmove 或者 touchend 事件，那么就触发长按手势。</p>
<p>长按是一个手指的行为，需要检测屏幕上是否只有一个接触点。<br>如果手指在空间上发生了移动，那么长按事件取消。<br>如果手指在屏幕上停留的时间超过800ms，那么触发长按手势。<br>如果手指在屏幕上停留的时间小于800ms，也即 touchend 在 touchstart 发生后的800ms内触发，那么长按事件取消。<br><img src="http://7xrvqo.com1.z0.glb.clouddn.com/images/gesture_detection_in_html5/2362670-78b28545c20ed15f.45c5424e.png" alt="原图 by qianduan"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">_onTouchStart(e) &#123;</div><div class="line">  clearTimeout(this.longPressTimeout);</div><div class="line">  if(e.touches.length &gt; 1) &#123;</div><div class="line">  &#125;else &#123;</div><div class="line">    this.longPressTimeout = setTimeout(()=&gt;&#123;</div><div class="line">      this._emitEvent(&apos;onLongPress&apos;);</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">_onTouchMove(e) &#123;</div><div class="line">  ...</div><div class="line">  clearTimeout(this.longPressTimeout);</div><div class="line">  ...</div><div class="line">&#125;</div><div class="line">_onTouchEnd(e) &#123;</div><div class="line">  ...</div><div class="line">  clearTimeout(this.longPressTimeout);</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>#缩放(pinch)<br>缩放是一个非常有趣的手势，还记得第一代iPhone双指缩放图片给你带来的震撼吗？虽然如此，缩放手势的检测却相对简单。</p>
<p>缩放是两个手指的行为，需要检测屏幕上是否有两个接触点。<br>缩放比例的量化，是通过两次缩放行为之间的距离的比值得到，如下图。<br><img src="http://7xrvqo.com1.z0.glb.clouddn.com/images/gesture_detection_in_html5/2362670-cecc52209ff03392.8f08400b.png" alt="原图 by qianduan"><br><strong> 所以缩放的核心是获取两个接触点之间的直线距离。</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">_onTouchStart(e) &#123;</div><div class="line">  if(e.touches.length &gt; 1) &#123;</div><div class="line">    let point1 = e.touches[0];</div><div class="line">    let point2 = e.touches[1];</div><div class="line">    let xLen = Math.abs(point2.pageX - point1.pageX);</div><div class="line">    let yLen = Math.abs(point2.pageY - point1.pageY);</div><div class="line">    this.touchDistance = this._getDistance(xLen, yLen);</div><div class="line">  &#125; else &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在_onTouchStart函数中获取并且保存 touchstart 发生时两个接触点之间的距离。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">_onTouchMove(e) &#123;</div><div class="line">  if(e.touches.length &gt; 1) &#123;</div><div class="line">      let xLen = Math.abs(e.touches[0].pageX - e.touches[1].pageX);</div><div class="line">      let yLen = Math.abs(e.touches[1].pageY - e.touches[1].pageY);</div><div class="line">      let touchDistance = this._getDistance(xLen,yLen);</div><div class="line">      if(this.touchDistance) &#123;</div><div class="line">        let pinchScale = touchDistance / this.touchDistance;</div><div class="line">          this._emitEvent(&apos;onPinch&apos;,&#123;scale:pinchScale - this.previousPinchScale&#125;);</div><div class="line">          this.previousPinchScale = pinchScale;</div><div class="line">      &#125;</div><div class="line">  &#125;else &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>#旋转(rotate)<br>旋转手势需要检测两个比较重要的值，一是旋转的角度，二是旋转的方向(顺时针或逆时针)。 其中旋转角度和方向的计算需要通过向量的计算来获取，本文不再展开，感兴趣的同学可以查看这里。<br><img src="http://7xrvqo.com1.z0.glb.clouddn.com/images/gesture_detection_in_html5/2362670-67c864158c19a169.671c66c2.png" alt="原图 by qianduan"><br>首先，需要获取向量的旋转方向和角度<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">	//这两个方法属于向量计算，具体原理请阅读本文最后的参考文献</div><div class="line">_getRotateDirection(vector1,vector2) &#123;</div><div class="line">  return vector1.x * vector2.y - vector2.x * vector1.y;</div><div class="line">&#125;  </div><div class="line">_getRotateAngle(vector1,vector2) &#123;</div><div class="line">  let direction = this._getRotateDirection(vector1,vector2);</div><div class="line">  direction = direction &gt; 0 ? -1 : 1;</div><div class="line">  let len1 = this._getDistance(vector1.x,vector1.y);</div><div class="line">  let len2 = this._getDistance(vector2.x,vector2.y);</div><div class="line">  let mr = len1 * len2;</div><div class="line">  if(mr === 0) return 0;</div><div class="line">  let dot = vector1.x * vector2.x + vector1.y * vector2.y;</div><div class="line">  let r = dot / mr;</div><div class="line">  if(r &gt; 1) r = 1;</div><div class="line">  if(r &lt; -1) r = -1;</div><div class="line">  return Math.acos(r) * direction * 180 / Math.PI;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后，我们在手指发生移动时，调用获取旋转方向和角度的方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">_onTouchStart(e) &#123;</div><div class="line">  ...  </div><div class="line">  if(e.touches.length &gt; 1) &#123;</div><div class="line">    this.touchVector = &#123;</div><div class="line">       x: point2.pageX - this.startX,</div><div class="line">       y: point2.pageY - this.startY</div><div class="line">     &#125;;</div><div class="line">  &#125;</div><div class="line">  ...</div><div class="line">&#125;</div><div class="line">_onTouchMove(e) &#123;</div><div class="line">  ...</div><div class="line">  if(this.touchVector) &#123;</div><div class="line">        let vector = &#123;</div><div class="line">          x: e.touches[1].pageX - e.touches[0].pageX,</div><div class="line">          y: e.touches[1].pageY - e.touches[0].pageY</div><div class="line">        &#125;;</div><div class="line">        let angle = this._getRotateAngle(vector,this.touchVector);</div><div class="line">        this._emitEvent(&apos;onRotate&apos;,&#123;</div><div class="line">          angle</div><div class="line">        &#125;);</div><div class="line">        this.touchVector.x = vector.x;</div><div class="line">        this.touchVector.y = vector.y;</div><div class="line">      &#125;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<a href="https://github.com/eeandrew/gestures" title="github" target="_blank" rel="external">源码</a>
<a href="http://eeandrew.github.io/demos/gestures/index.html" title="demo" target="_blank" rel="external">在线demo</a>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2016/08/18/about-touch/" data-id="cis2sw4og0007fcvbug8auouo" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://yoursite.com/2016/08/18/about-touch/#comments" class="article-comment-link ds-thread-count" data-thread-key="http://yoursite.com/2016/08/18/about-touch/">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2016/08/18/jquery-modle/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Newer</strong>
            <div class="article-nav-title">
                
                    jQuery开发模式
                
            </div>
        </a>
    
    
        <a href="/2016/08/17/about-web/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">101种让你网站更棒的方法</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div class="ds-thread" data-thread-key="2016/08/18/about-touch/" data-title="HTML5手势检测和原理" data-url="http://yoursite.com/2016/08/18/about-touch/"></div>
    <style>
        #ds-thread #ds-reset .ds-textarea-wrapper {
            background: none;
        }
        #ds-reset .ds-avatar img {
            box-shadow: none;
        }
        #ds-reset .ds-gradient-bg {
            background: #f7f7f7;
        }
        #ds-thread #ds-reset li.ds-tab a {
            border-radius: 3px;
        }
        #ds-thread #ds-reset .ds-post-button {
            color: white;
            border: none;
            box-shadow: none;
            background: #d32;
            text-shadow: none;
            font-weight: normal;
            font-family: 'Microsoft Yahei';
        }
        #ds-thread #ds-reset .ds-post-button:hover {
            color: white;
            background: #DE594C;
        }
        #ds-thread #ds-reset .ds-post-button:active {
            background: #d32;
        }
        #ds-smilies-tooltip ul.ds-smilies-tabs li a.ds-current {
            color: white;
            background: #d32;
            box-shadow: none;
            text-shadow: none;
            font-weight: normal;
        }
    </style>

    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/08/20/about-reg/" class="thumbnail">
    
    
        <span style="background-image:url(http://hbimg.b0.upaiyun.com/1be3a4b585ac2551091712c43f6d5790cba332cb1f897-BOHcKE_fw658)" alt="知道这20个正则表达式，能让你少写1,000行代码" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/经验/">经验</a></p>
                            <p class="item-title"><a href="/2016/08/20/about-reg/" class="title">知道这20个正则表达式，能让你少写1,000行代码</a></p>
                            <p class="item-date"><time datetime="2016-08-20T06:24:00.000Z" itemprop="datePublished">2016-08-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/08/19/js-prototype/" class="thumbnail">
    
    
        <span style="background-image:url(http://hbimg.b0.upaiyun.com/e54dcf0a66d15cf3ea5fadd7d1578df46886ac4f5f58-ziJd8f_fw658)" alt="js继承的那些事" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Study/">Study</a></p>
                            <p class="item-title"><a href="/2016/08/19/js-prototype/" class="title">js继承的那些事</a></p>
                            <p class="item-date"><time datetime="2016-08-19T02:54:00.000Z" itemprop="datePublished">2016-08-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/08/18/about-form/" class="thumbnail">
    
    
        <span style="background-image:url(http://hbimg.b0.upaiyun.com/879f9e736075a5fbf3b9efd3d1b82e881e27482811d64-JppchS_fw658)" alt="关于From表单及常用的一些正则" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Study/">Study</a></p>
                            <p class="item-title"><a href="/2016/08/18/about-form/" class="title">关于From表单及常用的一些正则</a></p>
                            <p class="item-date"><time datetime="2016-08-18T09:24:00.000Z" itemprop="datePublished">2016-08-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/08/18/jquery-modle/" class="thumbnail">
    
    
        <span style="background-image:url(http://hbimg.b0.upaiyun.com/2d6772da66cd283344e2fe2e9a40ee89f513f664e07b-RwJphx_fw658)" alt="jQuery开发模式" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Study/">Study</a></p>
                            <p class="item-title"><a href="/2016/08/18/jquery-modle/" class="title">jQuery开发模式</a></p>
                            <p class="item-date"><time datetime="2016-08-18T08:24:00.000Z" itemprop="datePublished">2016-08-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/08/18/about-touch/" class="thumbnail">
    
    
        <span style="background-image:url(http://hbimg.b0.upaiyun.com/a886eed2a16aa2dd0c064e9bededf4b6bd68e3d763b4-mduCQK_fw658)" alt="HTML5手势检测和原理" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Study/">Study</a></p>
                            <p class="item-title"><a href="/2016/08/18/about-touch/" class="title">HTML5手势检测和原理</a></p>
                            <p class="item-date"><time datetime="2016-08-18T02:24:00.000Z" itemprop="datePublished">2016-08-18</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Study/">Study</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/个人/">个人</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/经验/">经验</a><span class="category-list-count">4</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">16</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css3/">css3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/">html5</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mobile/">mobile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/regret/">regret</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ui/">ui</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/css/" style="font-size: 13.33px;">css</a> <a href="/tags/css3/" style="font-size: 10px;">css3</a> <a href="/tags/html/" style="font-size: 20px;">html</a> <a href="/tags/html5/" style="font-size: 10px;">html5</a> <a href="/tags/jquery/" style="font-size: 13.33px;">jquery</a> <a href="/tags/js/" style="font-size: 16.67px;">js</a> <a href="/tags/mobile/" style="font-size: 10px;">mobile</a> <a href="/tags/regret/" style="font-size: 10px;">regret</a> <a href="/tags/ui/" style="font-size: 10px;">ui</a> <a href="/tags/web/" style="font-size: 10px;">web</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2016 zengyimin<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'zengyimin'};
    (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>



    
        <script src="/vendor/fancybox/jquery.fancybox.pack.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>